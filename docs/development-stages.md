# –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Vision Bot

## –û–±–∑–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ 5 —ç—Ç–∞–ø–æ–≤. –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.

---

## –≠—Ç–∞–ø 1: –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —è–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

### –ó–∞–¥–∞—á–∏

- [x] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ `internal/domain/entity/` –∏ `internal/domain/port/`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `entity/defect.go` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `DefectArea`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `entity/inspection.go` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `InspectionResult`, `AiDescription`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `entity/user.go` ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `User`, `UserState`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `port/detector.go` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DefectDetector`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `port/describer.go` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `DefectDescriber`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `port/user_repository.go` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `UserRepository`

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ì–æ—Ç–æ–≤—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å—è—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª–æ–∏.

---

## –≠—Ç–∞–ø 2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –ó–∞–¥–∞—á–∏

- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `internal/infrastructure/storage/`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `memory_user_repository.go` ‚Äî in-memory —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `UserRepository`
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–†–∞–±–æ—Ç–∞—é—â–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º.

---

## –≠—Ç–∞–ø 3: Telegram-–±–æ—Ç —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

**–¶–µ–ª—å:** –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –ó–∞–¥–∞—á–∏

- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `internal/api/bot.go` ‚Äî –≤–Ω–µ–¥—Ä–∏—Ç—å `UserRepository`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Ö–æ–¥—è—â–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Telegram
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –£–ª—É—á—à–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã `/start` –∏ `/help`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/check` –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/cancel` –¥–ª—è –æ—Ç–º–µ–Ω—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ)

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ç–æ, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏, –Ω–æ –ø–æ–∫–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

---

## –≠—Ç–∞–ø 4: –ú–æ–¥—É–ª—å –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è (GoCV)

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–µ—Ç–µ–∫—Ç–æ—Ä –¥–µ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ OpenCV.

### –ó–∞–¥–∞—á–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `gocv.io/x/gocv` –≤ `go.mod`
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `internal/infrastructure/vision/`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `detector.go` ‚Äî `GoCVDetector` (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `DefectDetector`)
  - [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - [ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ grayscale
  - [ ] –†–∞–∑–º—ã—Ç–∏–µ (GaussianBlur)
  - [ ] –î–µ—Ç–µ–∫—Ü–∏—è –∫—Ä–∞—ë–≤ (Canny)
  - [ ] –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—É—Ä–æ–≤
  - [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–ª–æ—â–∞–¥–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `highlighter.go` ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –¥–µ—Ñ–µ–∫—Ç–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Dockerfile –¥–ª—è —Å–±–æ—Ä–∫–∏ —Å OpenCV
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –¥–µ—Ñ–µ–∫—Ç—ã –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–æ—Ç–æ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π.

---

## –≠—Ç–∞–ø 5: –ú–æ–¥—É–ª—å –ò–ò-–æ–ø–∏—Å–∞–Ω–∏—è (Ollama/Qwen)

**–¶–µ–ª—å:** –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π –¥–µ—Ñ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –ò–ò.

### –ó–∞–¥–∞—á–∏

- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `internal/infrastructure/ai/`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `ollama.go` ‚Äî `OllamaDescriber` (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `DefectDescriber`)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `prompt.go` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å Ollama –≤ `docker-compose.yml`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (`OLLAMA_URL`, `OLLAMA_MODEL`)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ò–ò
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ (qwen2.5:7b, qwen2.5:14b)

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—â–∏–π –±–æ—Ç: –¥–µ—Ç–µ–∫—Ü–∏—è –¥–µ—Ñ–µ–∫—Ç–æ–≤ + —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—Ç –ò–ò.

---

## –≠—Ç–∞–ø 6 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): Application Service

**–¶–µ–ª—å:** –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ª—É—á—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

### –ó–∞–¥–∞—á–∏

- [ ] –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `internal/application/inspection/`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `service.go` ‚Äî `InspectionService`
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∏–∑ –±–æ—Ç–∞ –≤ —Å–µ—Ä–≤–∏—Å
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

### –†–µ–∑—É–ª—å—Ç–∞—Ç

–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

---

## –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

| –≠—Ç–∞–ø | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|------|--------|------------|
| 1. –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π | ‚úÖ –ì–æ—Ç–æ–≤–æ | ‚Äî |
| 2. –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚è≥ –ù–µ –Ω–∞—á–∞—Ç | ‚Äî |
| 3. Telegram-–±–æ—Ç | üîÑ –ß–∞—Å—Ç–∏—á–Ω–æ | –ë–∞–∑–æ–≤—ã–π –±–æ—Ç –≥–æ—Ç–æ–≤ |
| 4. –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ | ‚è≥ –ù–µ –Ω–∞—á–∞—Ç | ‚Äî |
| 5. –ò–ò-–æ–ø–∏—Å–∞–Ω–∏–µ | ‚è≥ –ù–µ –Ω–∞—á–∞—Ç | ‚Äî |
| 6. Application Service | ‚è≥ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | ‚Äî |

---

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```
–≠—Ç–∞–ø 1 ‚îÄ‚îÄ‚ñ∂ –≠—Ç–∞–ø 2 ‚îÄ‚îÄ‚ñ∂ –≠—Ç–∞–ø 3 ‚îÄ‚îÄ‚ñ∂ –≠—Ç–∞–ø 4 ‚îÄ‚îÄ‚ñ∂ –≠—Ç–∞–ø 5
   ‚îÇ                                           ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –≠—Ç–∞–ø 6 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–ö–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ. –≠—Ç–∞–ø 6 –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 3.
